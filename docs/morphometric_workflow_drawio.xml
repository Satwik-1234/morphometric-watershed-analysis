<?xml version="1.0" encoding="UTF-8"?>
<mxGraphModel dx="1800" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2339" pageHeight="1654" math="0" shadow="0">
  <root>
    <mxCell id="0" />
    <mxCell id="1" parent="0" />

    <!-- =====================================================================
         TITLE BANNER
    ===================================================================== -->
    <mxCell id="title" value="&lt;b&gt;&lt;font style=&quot;font-size:18px;&quot;&gt;Complete Morphometric Analysis Workflow&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:11px;&quot;&gt;Horton (1945) â€¢ Strahler (1952, 1964) â€¢ Schumm (1956) â€¢ Miller (1953) â€¢ El Hamdouni (2008) â€¢ Perron &amp;amp; Royden (2012)&lt;/font&gt;"
      style="text;html=1;strokeColor=none;fillColor=#1e3a5f;fontColor=#FFFFFF;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="250" y="20" width="1820" height="60" as="geometry" />
    </mxCell>

    <!-- =====================================================================
         PHASE LABELS (left column)
    ===================================================================== -->
    <mxCell id="ph0" value="&lt;b&gt;INPUT&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#dae8fc;fontColor=#1e3a5f;align=center;verticalAlign=middle;fontStyle=1;fontSize=11;rotation=-90;" vertex="1" parent="1">
      <mxGeometry x="200" y="110" width="40" height="120" as="geometry" />
    </mxCell>
    <mxCell id="ph1" value="&lt;b&gt;S1-S2&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;fontColor=#1e3a5f;align=center;verticalAlign=middle;fontStyle=1;fontSize=11;rotation=-90;" vertex="1" parent="1">
      <mxGeometry x="200" y="300" width="40" height="120" as="geometry" />
    </mxCell>
    <mxCell id="ph2" value="&lt;b&gt;S3&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#fff2cc;fontColor=#1e3a5f;align=center;verticalAlign=middle;fontStyle=1;fontSize=11;rotation=-90;" vertex="1" parent="1">
      <mxGeometry x="200" y="500" width="40" height="350" as="geometry" />
    </mxCell>
    <mxCell id="ph3" value="&lt;b&gt;S4&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#f8cecc;fontColor=#1e3a5f;align=center;verticalAlign=middle;fontStyle=1;fontSize=11;rotation=-90;" vertex="1" parent="1">
      <mxGeometry x="200" y="920" width="40" height="120" as="geometry" />
    </mxCell>
    <mxCell id="ph4" value="&lt;b&gt;S5-S6&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#e1d5e7;fontColor=#1e3a5f;align=center;verticalAlign=middle;fontStyle=1;fontSize=11;rotation=-90;" vertex="1" parent="1">
      <mxGeometry x="200" y="1110" width="40" height="200" as="geometry" />
    </mxCell>
    <mxCell id="ph5" value="&lt;b&gt;S10-13&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=#f0e6ff;fontColor=#1e3a5f;align=center;verticalAlign=middle;fontStyle=1;fontSize=11;rotation=-90;" vertex="1" parent="1">
      <mxGeometry x="200" y="1380" width="40" height="220" as="geometry" />
    </mxCell>

    <!-- =====================================================================
         BLOCK 0 â€” DATA INPUTS
    ===================================================================== -->
    <mxCell id="inp_dem" value="&lt;b&gt;SRTM DEM&lt;/b&gt;&lt;br&gt;30 m resolution&lt;br&gt;(GeoTIFF)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
      <mxGeometry x="270" y="110" width="130" height="70" as="geometry" />
    </mxCell>
    <mxCell id="inp_sub" value="&lt;b&gt;Subbasins&lt;/b&gt;&lt;br&gt;Shapefile (5 basins)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
      <mxGeometry x="430" y="110" width="130" height="70" as="geometry" />
    </mxCell>
    <mxCell id="inp_str" value="&lt;b&gt;Stream Network&lt;/b&gt;&lt;br&gt;Strahler order SHP" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
      <mxGeometry x="590" y="110" width="130" height="70" as="geometry" />
    </mxCell>
    <mxCell id="inp_fd" value="&lt;b&gt;Flow Direction&lt;/b&gt;&lt;br&gt;D8 raster" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
      <mxGeometry x="750" y="110" width="130" height="70" as="geometry" />
    </mxCell>
    <mxCell id="inp_fa" value="&lt;b&gt;Flow Accumulation&lt;/b&gt;&lt;br&gt;D8 raster" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
      <mxGeometry x="910" y="110" width="130" height="70" as="geometry" />
    </mxCell>
    <mxCell id="inp_pp" value="&lt;b&gt;Pour Points&lt;/b&gt;&lt;br&gt;Shapefile&lt;br&gt;(snapped to max FA)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
      <mxGeometry x="1070" y="110" width="130" height="70" as="geometry" />
    </mxCell>

    <!-- =====================================================================
         BLOCK S1 â€” PREPROCESSING
    ===================================================================== -->
    <mxCell id="s1" value="&lt;b&gt;S1-S2: Data Preprocessing&lt;/b&gt;&lt;br&gt;â€¢ CRS validation &amp;amp; UTM reprojection&lt;br&gt;â€¢ Geometry repair &amp;amp; multipart explode&lt;br&gt;â€¢ Pour point snapping (max flow acc)&lt;br&gt;â€¢ DEM resolution check (~30 m)&lt;br&gt;â€¢ Slope &amp;amp; Aspect derivation&lt;br&gt;â€¢ Hillshade computation (az=315Â°)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="270" y="300" width="360" height="120" as="geometry" />
    </mxCell>
    <mxCell id="s1_qa" value="&lt;b&gt;QA / Assertions&lt;/b&gt;&lt;br&gt;â€¢ n_subbasins == 5&lt;br&gt;â€¢ res â‰ˆ 30 m&lt;br&gt;â€¢ No div/zero&lt;br&gt;â€¢ No null geom" style="shape=mxgraph.flowchart.manual_input;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
      <mxGeometry x="660" y="300" width="150" height="80" as="geometry" />
    </mxCell>

    <!-- =====================================================================
         BLOCK S3 â€” MORPHOMETRIC PARAMETERS (3 columns)
    ===================================================================== -->
    <!-- Header -->
    <mxCell id="s3_hdr" value="&lt;b&gt;S3: Morphometric Parameter Calculation&lt;/b&gt; â€” per subbasin" style="text;html=1;strokeColor=#7b4f00;fillColor=#fff2cc;align=center;verticalAlign=middle;fontStyle=1;fontSize=12;" vertex="1" parent="1">
      <mxGeometry x="270" y="500" width="860" height="35" as="geometry" />
    </mxCell>

    <!-- LINEAR -->
    <mxCell id="s3a" value="&lt;b&gt;A. Linear Aspects&lt;/b&gt;&lt;br&gt;[Horton, 1945; Strahler, 1952]&lt;br&gt;&lt;hr&gt;â€¢ Stream Number (Nu)&lt;br&gt;â€¢ Stream Length (Lu)&lt;br&gt;â€¢ Mean Stream Length (Lsm)&lt;br&gt;â€¢ Stream Length Ratio (RL)&lt;br&gt;â€¢ Bifurcation Ratio (Rb)&lt;br&gt;â€¢ Mean Bifurcation Ratio (Rbm)&lt;br&gt;â€¢ Weighted Mean Rbm&lt;br&gt;&lt;br&gt;&lt;i&gt;â†’ Horton's Laws&lt;br&gt;  regression (log scale)&lt;/i&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d6b656;fontSize=9.5;arcSize=5;align=left;spacingLeft=8;" vertex="1" parent="1">
      <mxGeometry x="270" y="545" width="250" height="220" as="geometry" />
    </mxCell>

    <!-- AREAL -->
    <mxCell id="s3b" value="&lt;b&gt;B. Areal Aspects&lt;/b&gt;&lt;br&gt;[Schumm, 1956; Miller, 1953]&lt;br&gt;&lt;hr&gt;â€¢ Basin Area (A)&lt;br&gt;â€¢ Perimeter (P)&lt;br&gt;â€¢ Basin Length (Lb)&lt;br&gt;â€¢ Drainage Density (Dd)&lt;br&gt;â€¢ Stream Frequency (Fs)&lt;br&gt;â€¢ Texture Ratio (T)&lt;br&gt;â€¢ Form Factor (Ff)&lt;br&gt;â€¢ Elongation Ratio (Re)&lt;br&gt;â€¢ Circularity Ratio (Rc)&lt;br&gt;â€¢ Compactness Coeff (Cc)&lt;br&gt;â€¢ Length Overland Flow (Lg)&lt;br&gt;â€¢ Channel Maintenance (C)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d6b656;fontSize=9.5;arcSize=5;align=left;spacingLeft=8;" vertex="1" parent="1">
      <mxGeometry x="545" y="545" width="250" height="220" as="geometry" />
    </mxCell>

    <!-- RELIEF -->
    <mxCell id="s3c" value="&lt;b&gt;C. Relief Aspects&lt;/b&gt;&lt;br&gt;[Strahler, 1964; Melton, 1965]&lt;br&gt;&lt;hr&gt;â€¢ Min / Max / Mean Elevation&lt;br&gt;â€¢ Basin Relief (H)&lt;br&gt;â€¢ Relief Ratio (Rh)&lt;br&gt;â€¢ Relative Relief&lt;br&gt;â€¢ Ruggedness Number (Rn)&lt;br&gt;â€¢ Melton Ruggedness (MRN)&lt;br&gt;â€¢ Hypsometric Integral (HI)&lt;br&gt;â€¢ Hypsometric Curve&lt;br&gt;â€¢ Slope stats (mean/std/skew)&lt;br&gt;â€¢ TRI (Riley et al., 1999)&lt;br&gt;&lt;br&gt;&lt;i&gt;â†’ Zonal stats via rasterio&lt;/i&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d6b656;fontSize=9.5;arcSize=5;align=left;spacingLeft=8;" vertex="1" parent="1">
      <mxGeometry x="820" y="545" width="250" height="220" as="geometry" />
    </mxCell>

    <!-- MASTER TABLE -->
    <mxCell id="s3_master" value="&lt;b&gt;Master Morphometric Table&lt;/b&gt;&lt;br&gt;(CSV + console preview)" style="shape=mxgraph.flowchart.stored_data;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
      <mxGeometry x="490" y="790" width="220" height="60" as="geometry" />
    </mxCell>

    <!-- =====================================================================
         BLOCK S4 â€” MAPS
    ===================================================================== -->
    <mxCell id="s4_hdr" value="&lt;b&gt;S4: Publication-Grade Map Generation&lt;/b&gt;&lt;br&gt;(Hillshade background â€¢ DMS grid â€¢ North arrow â€¢ Scale bar)" style="text;html=1;strokeColor=#a00000;fillColor=#f8cecc;align=center;verticalAlign=middle;fontStyle=1;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="270" y="920" width="860" height="35" as="geometry" />
    </mxCell>

    <mxCell id="s4_maps" value="Elevation â€¢ Slope â€¢ Aspect â€¢ Flow Direction â€¢ Flow Accumulation â€¢ Stream Order â€¢ Drainage Density â€¢ Contour â€¢ Pour Points (snapped)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="270" y="965" width="860" height="45" as="geometry" />
    </mxCell>

    <!-- =====================================================================
         BLOCK S5 â€” STATISTICS
    ===================================================================== -->
    <mxCell id="s5a" value="&lt;b&gt;S5: Descriptive Statistics&lt;/b&gt;&lt;br&gt;Mean â€¢ Median â€¢ Std â€¢ CV%&lt;br&gt;Skewness â€¢ Kurtosis" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="270" y="1080" width="220" height="80" as="geometry" />
    </mxCell>
    <mxCell id="s5b" value="&lt;b&gt;Correlation&lt;/b&gt;&lt;br&gt;Pearson + Spearman&lt;br&gt;VIF analysis" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="510" y="1080" width="180" height="80" as="geometry" />
    </mxCell>
    <mxCell id="s5c" value="&lt;b&gt;PCA&lt;/b&gt;&lt;br&gt;Scree â€¢ Biplot&lt;br&gt;Loadings" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="710" y="1080" width="160" height="80" as="geometry" />
    </mxCell>
    <mxCell id="s5d" value="&lt;b&gt;Clustering&lt;/b&gt;&lt;br&gt;K-means (silhouette k)&lt;br&gt;Hierarchical dendrogram" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="890" y="1080" width="200" height="80" as="geometry" />
    </mxCell>

    <!-- PRIORITIZATION -->
    <mxCell id="s6a" value="&lt;b&gt;S6-M1: Compound Ranking&lt;/b&gt;&lt;br&gt;Direct params: Dd, Fs, Rb, Rn, Rh, HI&lt;br&gt;Inverse params: Re, Rc, Ff&lt;br&gt;â†’ CF score â†’ High/Moderate/Low" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9.5;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="270" y="1195" width="270" height="85" as="geometry" />
    </mxCell>
    <mxCell id="s6b" value="&lt;b&gt;S6-M2: Entropy Weight&lt;/b&gt;&lt;br&gt;Normalize â†’ Shannon entropy&lt;br&gt;â†’ weight divergence&lt;br&gt;â†’ weighted score rank" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9.5;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="560" y="1195" width="250" height="85" as="geometry" />
    </mxCell>
    <mxCell id="s6c" value="&lt;b&gt;S6-M3: PCA-Based&lt;/b&gt;&lt;br&gt;PC scores Ã— explained variance&lt;br&gt;â†’ sign-corrected composite&lt;br&gt;â†’ rank by erosion risk" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9.5;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="830" y="1195" width="250" height="85" as="geometry" />
    </mxCell>
    <mxCell id="s6_tau" value="&lt;b&gt;Kendall's Ï„ â€” Inter-method Agreement&lt;/b&gt;&lt;br&gt;M1 vs M2 â€¢ M1 vs M3 â€¢ M2 vs M3 â†’ Priority Shapefile" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="400" y="1315" width="500" height="50" as="geometry" />
    </mxCell>

    <!-- =====================================================================
         BLOCK S7 â€” PLOTLY
    ===================================================================== -->
    <mxCell id="s7" value="&lt;b&gt;S7: Plotly Interactive Visualization Suite (12 HTML charts)&lt;/b&gt;&lt;br&gt;Horton's Laws â€¢ Radar â€¢ Scatter Matrix â€¢ 3D Scatter â€¢ Histograms â€¢ Box plots â€¢ Hypsometric curves overlay â€¢ Correlation heatmap â€¢ PCA biplot â€¢ Parallel coordinates â€¢ Bubble plot â€¢ Priority map â€¢ Longitudinal profiles" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="1120" y="545" width="380" height="120" as="geometry" />
    </mxCell>

    <!-- =====================================================================
         ADVANCED SECTIONS BLOCK (right column)
    ===================================================================== -->
    <mxCell id="adv_hdr" value="&lt;b&gt;ADVANCED ANALYSIS (S10â€“S13)&lt;/b&gt;" style="text;html=1;strokeColor=#6900ab;fillColor=#f0e6ff;align=center;verticalAlign=middle;fontStyle=1;fontSize=12;" vertex="1" parent="1">
      <mxGeometry x="1120" y="800" width="380" height="35" as="geometry" />
    </mxCell>

    <mxCell id="s10" value="&lt;b&gt;S10: Tectonic Activity Indices&lt;/b&gt;&lt;br&gt;[El Hamdouni et al., 2008]&lt;br&gt;&lt;hr&gt;â€¢ AF â€” Asymmetry Factor&lt;br&gt;â€¢ T â€” Transverse Topographic Symmetry&lt;br&gt;â€¢ Vf â€” Valley Floor Width-to-Height Ratio&lt;br&gt;â€¢ Smf â€” Mountain Front Sinuosity&lt;br&gt;&lt;b&gt;â†’ IAT composite class (1â€“4)&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0e6ff;strokeColor=#6900ab;fontSize=9.5;arcSize=5;align=left;spacingLeft=8;" vertex="1" parent="1">
      <mxGeometry x="1120" y="845" width="380" height="160" as="geometry" />
    </mxCell>

    <mxCell id="s11" value="&lt;b&gt;S11: Channel Steepness &amp;amp; Concavity&lt;/b&gt;&lt;br&gt;[Hack, 1973; Perron &amp;amp; Royden, 2012]&lt;br&gt;&lt;hr&gt;â€¢ SL â€” Stream Length Gradient Index&lt;br&gt;â€¢ SL Anomaly (SL / mean SL)&lt;br&gt;â€¢ S-A regression â†’ concavity Î¸&lt;br&gt;â€¢ ksn â€” normalised steepness (Î¸ref=0.45)&lt;br&gt;â€¢ Ï‡ (chi) coordinate profiles&lt;br&gt;&lt;b&gt;â†’ Knickpoint &amp;amp; stream capture detection&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0e6ff;strokeColor=#6900ab;fontSize=9.5;arcSize=5;align=left;spacingLeft=8;" vertex="1" parent="1">
      <mxGeometry x="1120" y="1020" width="380" height="175" as="geometry" />
    </mxCell>

    <mxCell id="s12" value="&lt;b&gt;S12: Geomorphic Anomaly &amp;amp; Lineaments&lt;/b&gt;&lt;br&gt;&lt;hr&gt;â€¢ Sinuosity Index (SI) per segment&lt;br&gt;â€¢ SL anomaly rasterisation&lt;br&gt;â€¢ GAI composite (SLÃ—0.5 + TRIÃ—0.3 + TWIâ»Â¹Ã—0.2)&lt;br&gt;â€¢ Structural lineaments (Sobel + Hough transform)&lt;br&gt;â€¢ High anomaly zones (top 20th percentile)&lt;br&gt;&lt;b&gt;â†’ Fault/fracture zone identification&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0e6ff;strokeColor=#6900ab;fontSize=9.5;arcSize=5;align=left;spacingLeft=8;" vertex="1" parent="1">
      <mxGeometry x="1120" y="1210" width="380" height="175" as="geometry" />
    </mxCell>

    <mxCell id="s13" value="&lt;b&gt;S13: Flood Hazard Indicators&lt;/b&gt;&lt;br&gt;[Moore et al., 1991; Smith, 2003]&lt;br&gt;&lt;hr&gt;â€¢ TWI â€” Topographic Wetness Index&lt;br&gt;â€¢ SPI â€” Stream Power Index&lt;br&gt;â€¢ STI â€” Sediment Transport Index&lt;br&gt;â€¢ FFPI â€” Flash Flood Potential Index&lt;br&gt;&lt;i&gt;  (SlopeÃ—0.35 + ReliefÃ—0.25 + TWIÃ—0.25 + SPIÃ—0.15)&lt;/i&gt;&lt;br&gt;&lt;b&gt;â†’ FHI priority rank per subbasin&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0e6ff;strokeColor=#6900ab;fontSize=9.5;arcSize=5;align=left;spacingLeft=8;" vertex="1" parent="1">
      <mxGeometry x="1120" y="1400" width="380" height="190" as="geometry" />
    </mxCell>

    <!-- =====================================================================
         OUTPUT BOX
    ===================================================================== -->
    <mxCell id="out" value="&lt;b&gt;S8-S9: Outputs &amp;amp; Report&lt;/b&gt;&lt;br&gt;ðŸ“ /maps/ â€” 25 PNG maps (hillshade + DMS grid)&lt;br&gt;ðŸ“ /plots/html/ â€” 26 interactive Plotly HTML&lt;br&gt;ðŸ“ /tables/ â€” 10 CSV tables&lt;br&gt;ðŸ“ /shapefiles/ â€” priority.shp, lineaments.shp&lt;br&gt;ðŸ“ /report/ â€” full text report + advanced interpretation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1e3a5f;strokeColor=#1e3a5f;fontColor=#FFFFFF;fontSize=10.5;arcSize=5;" vertex="1" parent="1">
      <mxGeometry x="270" y="1400" width="760" height="110" as="geometry" />
    </mxCell>

    <!-- =====================================================================
         LEGEND
    ===================================================================== -->
    <mxCell id="leg_hdr" value="&lt;b&gt;LEGEND&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;fontStyle=1;fontSize=11;" vertex="1" parent="1">
      <mxGeometry x="1560" y="110" width="100" height="25" as="geometry" />
    </mxCell>
    <mxCell id="leg1" value="Data Input" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=6;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=9;" vertex="1" parent="1">
      <mxGeometry x="1560" y="140" width="140" height="40" as="geometry" />
    </mxCell>
    <mxCell id="leg2" value="Preprocessing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
      <mxGeometry x="1560" y="195" width="140" height="35" as="geometry" />
    </mxCell>
    <mxCell id="leg3" value="Core Parameters" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d6b656;fontSize=9;" vertex="1" parent="1">
      <mxGeometry x="1560" y="245" width="140" height="35" as="geometry" />
    </mxCell>
    <mxCell id="leg4" value="Map Generation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=9;" vertex="1" parent="1">
      <mxGeometry x="1560" y="295" width="140" height="35" as="geometry" />
    </mxCell>
    <mxCell id="leg5" value="Statistics / Priority" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9;" vertex="1" parent="1">
      <mxGeometry x="1560" y="345" width="140" height="35" as="geometry" />
    </mxCell>
    <mxCell id="leg6" value="Advanced Analysis" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0e6ff;strokeColor=#6900ab;fontSize=9;" vertex="1" parent="1">
      <mxGeometry x="1560" y="395" width="140" height="35" as="geometry" />
    </mxCell>
    <mxCell id="leg7" value="Visualization" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=9;" vertex="1" parent="1">
      <mxGeometry x="1560" y="445" width="140" height="35" as="geometry" />
    </mxCell>
    <mxCell id="leg8" value="Output / Report" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1e3a5f;strokeColor=#1e3a5f;fontColor=#FFFFFF;fontSize=9;" vertex="1" parent="1">
      <mxGeometry x="1560" y="495" width="140" height="35" as="geometry" />
    </mxCell>

    <!-- =====================================================================
         ARROWS â€” main flow
    ===================================================================== -->
    <!-- Inputs â†’ Preprocessing -->
    <mxCell id="e1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" source="inp_dem" target="s1" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <mxCell id="e2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.3;entryY=0;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" source="inp_sub" target="s1" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <mxCell id="e3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" source="inp_str" target="s1" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <mxCell id="e4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.7;entryY=0;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" source="inp_fd" target="s1" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <mxCell id="e5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.9;entryY=0;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" source="inp_fa" target="s1" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <mxCell id="e6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.95;entryY=0;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" source="inp_pp" target="s1" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>

    <!-- Preprocessing â†’ S3 header -->
    <mxCell id="e7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#82b366;strokeWidth=2;" edge="1" source="s1" target="s3_hdr" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <!-- S3 header â†’ 3 blocks -->
    <mxCell id="e8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#d6b656;strokeWidth=1.5;" edge="1" source="s3_hdr" target="s3a" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <mxCell id="e9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#d6b656;strokeWidth=1.5;" edge="1" source="s3_hdr" target="s3b" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <mxCell id="e10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#d6b656;strokeWidth=1.5;" edge="1" source="s3_hdr" target="s3c" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <!-- 3 blocks â†’ master table -->
    <mxCell id="e11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#d6b656;" edge="1" source="s3a" target="s3_master" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <mxCell id="e12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#d6b656;" edge="1" source="s3b" target="s3_master" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <mxCell id="e13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#d6b656;" edge="1" source="s3c" target="s3_master" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <!-- master table â†’ maps -->
    <mxCell id="e14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#b85450;strokeWidth=2;" edge="1" source="s3_master" target="s4_hdr" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <!-- maps â†’ stats -->
    <mxCell id="e15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#9673a6;strokeWidth=2;" edge="1" source="s4_maps" target="s5a" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <!-- stats â†’ prioritization -->
    <mxCell id="e16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#9673a6;" edge="1" source="s5a" target="s6a" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <mxCell id="e17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#9673a6;" edge="1" source="s5b" target="s6b" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <mxCell id="e18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#9673a6;" edge="1" source="s5c" target="s6c" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <!-- prioritization â†’ Kendall's tau -->
    <mxCell id="e19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#82b366;" edge="1" source="s6a" target="s6_tau" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <mxCell id="e20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#82b366;" edge="1" source="s6b" target="s6_tau" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <mxCell id="e21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#82b366;" edge="1" source="s6c" target="s6_tau" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <!-- tau â†’ output -->
    <mxCell id="e22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#1e3a5f;strokeWidth=2;" edge="1" source="s6_tau" target="out" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <!-- master â†’ plotly -->
    <mxCell id="e23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#6c8ebf;strokeWidth=1.5;dashed=1;" edge="1" source="s3_master" target="s7" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <!-- S3 â†’ Advanced -->
    <mxCell id="e24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#6900ab;strokeWidth=2;dashed=1;" edge="1" source="s3c" target="s10" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <!-- S10 â†’ S11 â†’ S12 â†’ S13 -->
    <mxCell id="e25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#6900ab;strokeWidth=2;" edge="1" source="s10" target="s11" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <mxCell id="e26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#6900ab;strokeWidth=2;" edge="1" source="s11" target="s12" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <mxCell id="e27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#6900ab;strokeWidth=2;" edge="1" source="s12" target="s13" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <!-- S13 â†’ output -->
    <mxCell id="e28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#6900ab;strokeWidth=1.5;dashed=1;" edge="1" source="s13" target="out" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>
    <!-- S7 â†’ output -->
    <mxCell id="e29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#6c8ebf;strokeWidth=1.5;dashed=1;" edge="1" source="s7" target="out" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell>

  </root>
</mxGraphModel>
